!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ads={})}(this,(function(e){"use strict";var t,n,o=function(){var e=window.crypto||window.msCrypto,t=new RegExp(/[xy]/g);if(void 0!==e&&void 0!==e.getRandomValues)return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,(function(t){var n=e.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"==t?n:3&n|8).toString(16)}))}(),i=(t={},window.location.search.slice(1).toLowerCase().split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]||!0})),t),a=(n={},window.location.search.slice(1).toLowerCase().split("&").map((function(e){return e.split("=")})).forEach((function(e){"debug"===e[0]&&(n[e[1]]=!0)})),n),r={"1x2":"native","1x3":"responsive","1x5":"responsive-no-refresh","3x3":"house"},s=a.ads?console.debug.bind(window.console):function(){},d=a.ads&&console.table?console.table.bind(window.console):function(){};function l(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function c(e){return e.replace(/\n\s+/g,"\n")}function u(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function f(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var v=window.performance||{};v.mark=v.mark||function(e){},v.measure=v.measure||function(e,t,n){},v.now=v.now||function(){};var _={native:[1,2],logo:[88,31],leaderboard:[728,90],billboard:[970,250],halfpage:[300,600],box:[300,250],mobilebanner:[320,50],custom:[1,1],responsive:[1,3],teads:[1,4],videoUpNext:[2,2],cineflex:[2,4],house:[3,3]},w={native:[_.native],house:[_.house],teads:[_.teads],"mobile-wide":[_.responsive,_.box],"desktop-wide":[_.responsive,_.leaderboard,_.billboard],rail:[_.box,_.halfpage],"bottompersistent-desktop":[_.leaderboard],"bottompersistent-mobile":[_.mobilebanner],cineflex:[_.cineflex],logo:[_.logo],custom:[_.custom]},k=0;function y(e){if(0===e.indexOf("[[")||"[]"===e)return JSON.parse(e);var t=e.split(",").filter((function(e){return""!==e})),n=[];return t.forEach((function(e){e=e.trim(),w[e]?w[e].forEach((function(e){return n.push(e)})):console.error("Couldn't find ad sizes matching '".concat(e,"'"))})),n}function x(e){var t,n={};return e.id||(k++,e.id="".concat("gpt-unit-").concat(k)),t=e.id,document.querySelectorAll('[id="'.concat(t,'"]')).length>1&&console.error(c("There's more than one element\n              with the id of '".concat(t,"'.\n              Unless the ids are unique no ads will load."))),n.id=e.id,n.breakpoints=function(e){var t=e.getElementsByTagName("gpt-sizeset");return Array.prototype.map.call(t,(function(e){return{viewport:JSON.parse(e.getAttribute("viewport-size")),sizes:y(e.getAttribute("sizes"))}}))}(e),n.targeting=function(e){for(var t={},n=0;n<e.attributes.length;n+=1){var o=e.attributes[n];0===o.name.indexOf("targeting-")&&(t[o.name.slice("targeting-".length)]=o.value.split(","))}return t}(e),n.format=function(e){var t=e.getAttribute("format");t||(t=function(e){var t,n=["injector","rrail","adhesion","native","logo","recirc","cineflex"],o=e.className.split(" "),i=[];o.filter((function(e){return-1!==e.indexOf("kvr-")})).length?i=o.filter((function(e){return 0===e.indexOf("kvr-")})).map((function(e){return e.slice(4)})):i.push("other");for(var a=0;a<n.length;a++)if(-1!==i.indexOf(n[a])){t=n[a];break}return t}(e));return t||"other"}(e),n.targeting.class=[n.format],n}var j={};function z(e){b(j,e)}function S(){return j}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.ad_queue=window.ad_queue||[];var A={init:window.ad_queue,justInTimeQueue:[],lazyLoadQueue:[]};function I(e,t){this.key=e,this.q=A[e],this.externalCallback=t||null}I.prototype.push=function(e){this.externalCallback?this.externalCallback(e):this.q.push(e)},I.prototype.setCallback=function(e){this.externalCallback?this.externalCallback=e:this.q.push=e},I.prototype.execute=function(e){this.externalCallback?console.error("You can't execute the ".concat(this.key," queue because it's a vendor API.")):this.q.forEach(e)};var E=new I("init"),q=new I("justInTimeQueue"),C=new I("lazyLoadQueue"),T=new I("gpt",(function(e){window.googletag.cmd.push(e)}));function P(){var e=window.navigator.userAgent||"",t="desktop";return(window.screen.width||window.innerWidth)<800&&(t="mobile"),e.match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/i)?t="tablet":e.match(/Mobile|iP(hone|od)|BlackBerry|IEMobile/i)&&(t="mobile"),t}function O(e){function t(e){for(var t=e;e=e.previousElementSibling;)if(e.offsetParent)return e;for(e=t;e=e.nextElementSibling;)if(e.offsetParent)return e}for(;null===e.offsetParent;)e=t(e)||e.parentNode;return e.getBoundingClientRect()}function L(){return ye.all().filter((function(e){return!e.isDeferred()&&!e.called&&document.body.contains(e.element)}))}function B(e,t){return 0===t||function(e){var t=e.clientRect,n=e.lazy,o=t.top;return o<window.innerHeight*n&&o>0}({clientRect:O(e),lazy:t})}var N=null,D=!1;var R=window.pageYOffset,M=0,U=!1,G=!1;function F(e){e=b({changeCorrelator:!M,defaultLazy:S().lazy_load||0},e);var t=Math.abs(R-window.pageYOffset);if(R=window.pageYOffset,!(t>500)){var n=L();C.execute((function(t){t.call({defaultLazy:e.defaultLazy})}));var o=(n=(n=n.filter((function(t){var n=t.getLazySetting(e.defaultLazy);return B(t.element,n)}))).filter((function(e){var t=e.isTaskQueueComplete();if(!t){var n=e.tasks.filter((function(e){return!e.isComplete})).map((function(e){return e.name})).join(", ");s("".concat(e.element.id," stalled waiting on ").concat(n," 🛑")),e.stalls++}return t}))).map((function(e){return e.gptSlot})),i=N&&!D?(D=!0,s("Included outofpage ad in gpt call"),N):null;i&&o.push(i),0!==o.length&&(M++,n.forEach((function(e){e.setCalled(),e.batch=M;var t=e.getBidders();e.gptSlot.setTargeting("nobids",(0===t.length).toString()),e.data.targeting.nobids=0===t.length,e.gptSlot.setTargeting("maxbid",e.getMaxBid()),t.length?s("Ads: ".concat(e.id," called with the bidders from \n  ").concat(t.join("\n  ")),"\nTargeting : ",e.getTargetingMap()):s("Ads: ".concat(e.id," called with 0 bids"))})),s("GPT Refresh call:",{ads:n,changeCorrelator:e.changeCorrelator}),U||(v.mark("ads:first_call"),U=!0),!G&&n.filter((function(e){return e.tasks.length})).length&&(v.mark("ads:first_call_with_locking_tasks"),G=!0),googletag.pubads().refresh(o,{changeCorrelator:e.changeCorrelator}))}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e+Math.floor(Math.random()*(t-e+1))}var J=window.adsjsExperiments||{},Q=void 0,H=V(1,100);function W(){return void 0===Q&&(Q=parseInt(i.adkv_abt,10)||(S().globals||{}).abt||V(1,100),s("ABT value: ".concat(Q))),Q}J.disableAppnexus=function(){return[55,59,71].indexOf(W())>-1},J.disableCriteo=function(){return[56,59,71].indexOf(W())>-1},J.disableIndex=function(){return[57,59,67,71].indexOf(W())>-1},J.disableRubicon=function(){return[58,59,70,71].indexOf(W())>-1},J.disableTAM=function(){return[64,71].indexOf(W())>-1},J.disablePubmatic=function(){return[59,69,71,76].indexOf(W())>-1},J.disableAllPrebid=function(){return J.disableAppnexus()&&J.disableCriteo()&&J.disableIndex()&&J.disableRubicon()&&J.disablePubmatic()},J.prebidUserID=function(){return 82===W()};var Y=function(e,t,n){if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(o.toUTCString(),"; path=/")}else document.cookie="".concat(e,"=").concat(t,"; path=/")},K=function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},X=[1,3,5],Z=[];function $(e,t){return 0===t.map((function(t){return e[t]||!1})).filter((function(e){return!0!==e})).length}function ee(){return new Promise((function(e){new Promise((function(e,t){window.__cmp("getConsentData",1,(function(t,n){n&&t.gdprApplies?e({isGDPR:!0}):e({isGDPR:!1})}))})).then((function(t){t.isGDPR?new Promise((function(e,t){window.__cmp("getVendorConsents",null,(function(t){var n=t.purposeConsents,o=t.vendorConsents,i=(X.map((function(e){return n[e]})),$(n,X)),a=$(o,Z);i&&a?(s("Ads.js: Acquired consent."),v.mark("ads:consent_granted"),e({consentGranted:!0})):(T.push((function(){s("GPT Disabled nonpersonalized ads"),googletag.pubads().setRequestNonPersonalizedAds(1)})),s("Ads.js: User declined to consent."),v.mark("ads:consent_rejected"),e({consentGranted:!1}))}))})).then((function(t){var n=t.consentGranted;e({ok:n})})):e({ok:!0})}))}))}function te(){return null!==K("atl_ccpa")||a.donotsell||!1}var ne=["728x90","970x250","300x600","300x250","320x50"],oe=0,ie={b5pw5c:"tam_amazon","1e2my2o":"tam_gumgum","2cks8w":"tam_districtm",szhszk:"tam_rubicon","1lubksg":"tam_pubmatic",b87shs:"tam_openx",k3usqo:"tam_pulsepoint","1si1tz4":"tam_emx_digital","1iigg74":"tam_yieldmo",izwf7k:"tam_dmx"},ae=3e3,re=2250,se="ads:amazon:init",de="ads:amazon:ready",le="ads:amazon:bid:start",ce="ads:amazon:bid:end",ue=!0,fe={},pe={};function ge(e){var t=e.getActiveSizes().filter((function(e){return ne.indexOf(e.join("x"))>-1}));return!!t.length&&(pe[e.id]=t,!0)}var me={r42jnk:"0.02",h5iww:"0.04",i8fjeo:"0.06",dsm1a8:"0.08",vjw1s0:"0.10","4wz11c":"0.12",mo91j4:"0.14",bkpa80:"0.16",tbzaps:"0.18","2p29z4":"0.20",kgcagw:"0.22",g0iscg:"0.24",xrssu8:"0.26","74vs3k":"0.28",ow5slc:"0.30",agqwow:"0.32",s80x6o:"0.34","1l3wg0":"0.36",jcdwxs:"0.38",ewketc:"0.40",wnufb4:"0.42","60xekg":"0.44",ns7f28:"0.46",connr4:"0.48",ufxo8w:"0.50","3t0ni8":"0.52",lkao00:"0.54",h4h5vk:"0.56",yvr6dc:"0.58","88u5mo":"0.60",q0464g:"0.62","9wrpxc":"0.64",ro1qf4:"0.66","114pog":"0.68",iseq68:"0.70",ecl81s:"0.72",w3v8jk:"0.74","5gy7sw":"0.76",n888ao:"0.78",c4ogzk:"0.80",tvyhhc:"0.82","391gqo":"0.84",l0bh8g:"0.86",gkhz40:"0.88",ybrzls:"0.90","7ouyv4":"0.92",pg4zcw:"0.94",b0q3gg:"0.96",ss03y8:"0.98","25337k":"1.00",jwd3pc:"1.02",fgjlkw:"1.04",x7tm2o:"1.06","6kwlc0":"1.08",oc6lts:"1.10",d8muio:"1.12",uzwv0g:"1.14","4czu9s":"1.16",m49urk:"1.18",hogcn4:"1.20",zfqd4w:"1.22","8stce8":"1.24",qk3cw0:"1.26","92sxs0":"1.28",qu2y9s:"1.30","75xj4":"1.32",hyfy0w:"1.34",dimfwg:"1.36",v9wge8:"1.38","4mzfnk":"1.40",me9g5c:"1.42",bapou8:"1.44",t1zpc0:"1.46","2f2olc":"1.48",k6cp34:"1.50",fqj6yo:"1.52",xht7gg:"1.54","6uw6ps":"1.56",om677k:"1.58",a6rbb4:"1.60",ry1bsw:"1.62","1b4b28":"1.64",j2ebk0:"1.66",emktfk:"1.68",wdutxc:"1.70","5qxt6o":"1.72",ni7tog:"1.74",ceo2dc:"1.76",u5y2v4:"1.78","3j124g":"1.80",lab2m8:"1.82",guhkhs:"1.84",ylrkzk:"1.86","7yuk8w":"1.88",pq4kqo:"1.90","9ms4jk":"1.92",re251c:"1.94",r54ao:"1.96",iif4sg:"1.98",e2lmo0:"2.00","14pineo":"2.05",tlyw3k:"2.10","1k8vwu8":"2.15","7evdhc":"2.20","1a9aj28":"2.25",jmdibk:"2.30","1wge1og":"2.35",cyn94w:"2.40","13lk9vk":"2.45",z5qrr4:"2.50","1psnshs":"2.55",c5q80:"2.60","1d669kw":"2.65",mj98u8:"2.70","1spjj0g":"2.75",fviznk:"2.80","16ig0e8":"2.85",s314hs:"2.90","1ipy58g":"2.95","5vxlvk":"3.00","1c27w1s":"3.05",lfavb4:"3.10","1y9beo0":"3.15","9rrx8g":"3.20","10eoxz4":"3.25",vyvfuo:"3.30","1mlsglc":"3.35","341o1s":"3.40","1fy27eo":"3.45",pb56o0:"3.50","1s5kc8w":"3.55",fbjsw0:"3.60","15ygtmo":"3.65",uux2bk:"3.70","1lhu328":"3.75","8ntjpc":"3.80","18gd62o":"3.85",htg5c0:"3.90","1ungoow":"3.95",b5pw5c:"4.00","11smww0":"4.05",xcterk:"4.10","1nzqfi8":"4.15","164idc":"4.20","1e051q8":"4.25",nd80zk:"4.30","1tjib5s":"4.35",gphrsw:"4.40","17cesjk":"4.45",r92ccg:"4.50","1hvzd34":"4.55","51ytq8":"4.60","1b893wg":"4.65",klc35s:"4.70","1xfcmio":"4.75",alqpds:"4.80","118nq4g":"4.85",wsu800:"4.90","1nfr8qo":"4.95","3y0g74":"5.00","1gs0zk0":"5.05",q53ytc:"5.10","1qp4gzk":"5.15",dv3xmo:"5.20","14i0ydc":"5.25",teh728:"5.30","1k1e7sw":"5.35","77dog0":"5.40","1a1su0w":"5.45",jevta8:"5.50","1w8wcn4":"5.55",cr5k3k:"5.60","13e2ku8":"5.65",yy92ps:"5.70","1pl63gg":"5.75","13mm0w":"5.80","1dxn5ds":"5.85",naq4n4:"5.90","1th0etc":"5.95",gmzvgg:"6.00","179ww74":"6.05",sui0ao:"6.10","1jhf11c":"6.15","6nehog":"6.20","1ctoruo":"6.25",m6rr40:"6.30","1z0sagw":"6.35","95au4g":"6.40",zs7uv4:"6.45",vcecqo:"6.50","1lzbdhc":"6.55","2hkkxs":"6.60","1fbl4ao":"6.65",ooo3k0:"6.70","1rj394w":"6.75",ep2ps0:"6.80","15bzqio":"6.85",u8fz7k:"6.90","1kvczy8":"6.95","81cglc":"7.00","197u1vk":"7.05",ikx14w:"7.10","1vexkhs":"7.15",bx6ry8:"7.20","12k3sow":"7.25",y4aakg:"7.30","1or7bb4":"7.35","1xle68":"7.40","1erlxj4":"7.45",o4owsg:"7.50","1uaz6yo":"7.55",hgynls:"7.60","183vocg":"7.65",r1knb4:"7.70","1hoho1s":"7.75","4uh4ow":"7.80","1b0rev4":"7.85",kdue4g:"7.90","1x7uxhc":"7.95",ae90cg:"8.00",1116134:"8.05",wlciyo:"8.10","1n89jpc":"8.15","3qir5s":"8.20","1gkjaio":"8.25",pxm9s0:"8.30","1r43v28":"8.35",ea3bpc:"8.40","14x0cg0":"8.45",ttgl4w:"8.50","1kgdlvk":"8.55","7md2io":"8.60","1ags83k":"8.65",jtv7cw:"8.70","1wnvqps":"8.75",d64y68:"8.80","13t1yww":"8.85",zd8gsg:"8.90","1q05hj4":"8.95","4o16o":"9.00","1cyokjk":"9.05",mbrjsw:"9.10","1si1tz4":"9.15",fo1am8:"9.20","16aybcw":"9.25",rvjfgg:"9.30","1iigg74":"9.35","5ofwu8":"9.40","1buq70g":"9.45",l7t69s:"9.50","1y1tpmo":"9.55","9ka874":"9.60","10778xs":"9.65",vrdqtc:"9.70","1meark0":"9.75","2wjz0g":"9.80","1fqkidc":"9.85",p3nhmo:"9.90","1ry2n7k":"9.95",f423uo:"10.00","18u3lz4":"10.25",xqjuo0:"10.50","1tx8r28":"10.75","5fp9mo":"11.00","11me60w":"11.25",qiueps:"11.50","1jnnrwg":"11.75",cdf474:"12.00","1djwphc":"12.25",sgrke8:"12.50","1yn1ukg":"12.75","2itj40":"13.00","15d8oow":"13.25",im5zb4:"13.50","1osg9hc":"13.75",hi7ls0:"14.00","1an0yyo":"14.25",w7m328:"14.50","1qqdf5s":"14.75","78mmm8":"15.00","13fbj0g":"15.25",mphzpc:"15.50","1iw6w3k":"15.75","9y0o3k":"16.00","1g4ay9s":"16.25",v15t6o:"16.50","1utpfk0":"16.75","1cd98g":"17.00","17injeo":"17.25",krku0w:"17.50","1nlzzls":"17.75",dov6rk:"18.00","19vk35s":"18.25",ys0buo:"18.50","1tarny8":"18.75","6h5qtc":"19.00",zlz400:"19.25",oifcow:"19.50","1kp4934":"19.75",bqy134:"20.00","1eld6o0":"20.25",r3g2kg:"20.50","1x9qcqo":"20.75","3se6f4":"21.00","14yvrpc":"21.25",jvqmm8:"21.50","1q20wsg":"21.75",fpwpvk:"22.00","1bwlm9s":"22.25",vt962o:"22.50","1rzy2gw":"22.75","8i79xc":"23.00","122016o":"23.25",nml5a8:"23.50","1i5chds":"23.75",av3tog:"24.00","1h1e3uo":"24.25",swdfk0:"24.50","1vqsl4w":"24.75",liuio:"25.00",lonzls:"25.50",eyfu2o:"26.00",ydnev4:"26.50","4ouuww":"27.00",ps0000:"27.50",d0ioe8:"28.00",s4wjr4:"28.50","35x3b4":"29.00",hvbklc:"29.50",grd728:"30.00",wupn9c:"30.50","730cu8":"31.00",n6ct1c:"31.50","90xiio":"32.00",u42nls:"32.50","1t82kg":"33.00",k9h2io:"33.50",e5q03k:"34.00",z8v56o:"34.50","5k2l8g":"35.00",oza60w:"35.50",blbrb4:"36.00",roo7i8:"36.50","4dmbcw":"37.00",j30sn4:"37.50",gb4utc:"38.00",vfiq68:"38.50","84gu0w":"39.00",o7ta80:"39.50",a2dzpc:"40.00",thlkhs:"40.50",hgrgg:"41.00",lklwjk:"41.50",fguu4g:"42.00",xi4g00:"42.50","579uyo":"43.00",qaf01s:"43.50",cjz3ls:"44.00",snbjsw:"44.50","2ae4g0":"45.00",idqkn4:"45.50",h9s740:"46.00",wqnk74:"46.50","7ro3r4":"47.00",mh2l1c:"47.50","9pl9fk":"48.00",usqeio:"48.50","1ix8n4":"49.00",ky4tfk:"49.50",dgfs3k:"50.00","68qc5c":"51.00",c3qrcw:"52.00","3i3chs":"53.00",fula0w:"54.00","8mvu2o":"55.00",akszr4:"56.00","12owe8":"57.00",eo505c:"58.00","4tjf28":"59.00",d578jk:"60.00","2vm9ds":"61.00",h45xc0:"62.00","6uky68":"63.00","97hhxc":"64.00","1zs1z4":"65.00",dxalfk:"66.00","6342dc":"67.00",bcwcn4:"68.00","456wow":"69.00",ghou80:"70.00","7w1fcw":"71.00",af6pz4:"72.00","5lqtc":"73.00",f4zthc:"74.00","5ae8e8":"75.00",c842yo:"76.00","2pzzls":"77.00",hpe29s:"78.00","7ft340":"79.00","9spmv4":"80.00",172800:"81.00",dsgf0g:"82.00","6kqz28":"83.00",buj9c0:"84.00","3nv8jk":"85.00",flds00:"86.00","8doc1s":"87.00",b32dj4:"88.00",thedc:"89.00",etww74:"90.00","4kbx1c":"91.00",cvzqio:"92.00","37mwao":"93.00",gt301s:"94.00","6yheyo":"95.00","8wekn4":"96.00","1op4ow":"97.00",edojy8:"98.00","5s1534":"99.00",bgstfk:"100.00"};function he(e){e.element.classList.remove("ad-called"),e.element.className=e.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ad-loaded")})).join(" "),e.called=!1,e.isResponsive=null,e.size=null,e.hadViewableImpression=null,e.loaded=!1,e.tasks=[],T.push((function(){googletag.pubads().clear([e.gptSlot])}))}var be={country:void 0,region:void 0};function ve(e){e=e||function(){};var t,n,o={};try{o=JSON.parse(localStorage.getItem("adsgeo2"))||{},be=o}catch(e){}if(!1==(t=o.lastUpdated,n=Date.now()-new Date(t).valueOf(),!!isNaN(n)||n/1e3/60/60/24>14))return e();Object.keys(o).length>0&&(s("Ads: updating your geodata in the background"),e()),function(e){return new Promise((function(t,n){var o=new XMLHttpRequest;o.addEventListener("load",(function(e){try{t(JSON.parse(o.response))}catch(e){n()}})),o.addEventListener("error",(function(e){n()})),o.open("GET",e),o.send()}))}("/api/user_country/").then((function(t){t.lastUpdated=new Date,be={country:t.country,region:t.region,is_gdpr:t.is_gdpr,speed:t.speed},e(),localStorage.setItem("adsgeo2",JSON.stringify(be)),s("Updated geodata"),v.mark("ads:synced_new_geodata")})).catch(e)}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;v.mark("ads:geodata_start");var t=!1;return new Promise((function(n,o){ve((function(){t=!0,s("Ads: Geodata is ready 🌎"),v.mark("ads:geodata_ready"),n()})),setTimeout((function(){t||(s("Ads: Geodata lookup timed out 🌎"),n())}),e)})).then((function(){v.mark("ads:geodata_done"),v.measure("ads:geodata_delay","ads:geodata_start","ads:geodata_done")}))}function we(){return be}var ke=[],ye=function(){function e(t){g(this,e),t.classList.add("is-registered"),this.element=t,this.data=x(t),this.element.inspect=function(){return e.getById(this.id)},this.called=!1,this.loaded=!1,this.size=null,this.gptSlot=null,this.isResponsive=null,this.stalls=0,this.startTime=null,this.loadtime=null,this.batch=0,this.memoryAtLoad=null,this.delayAtLoad=null,this.advertiserId=null,this.lineItemId=null,this.creativeId=null,this.campaignId=null,this.hadViewableImpression=null,this.googleQueryId=null,this.tasks=[]}return h(e,[{key:"getLazySetting",value:function(e){return void 0===e&&(e=0),this.element.hasAttribute("lazy-load")?parseFloat(this.element.getAttribute("lazy-load")):e}},{key:"getAdUnitPath",value:function(){return S().zone+"/"+this.data.format}},{key:"createGptSlot",value:function(){var e=this.getAdUnitPath();this.gptSlot||(this.gptSlot=function(e,t){var n=e.data,o=e.gptSlot;for(var i in e.gptSlot||(o=googletag.defineSlot(t,[0,0],n.id).addService(googletag.pubads()),s("Created slot for ad: "+n.id)),e.data.targeting.slotname=e.getSlotName(),n.targeting)o.setTargeting(i,n.targeting[i]);var a=googletag.sizeMapping();return n.breakpoints.forEach((function(e){a.addSize(e.viewport,e.sizes)})),o.defineSizeMapping(a.build()),googletag.display(e.id),o}(this,e))}},{key:"isDeferred",value:function(){return this.element.hasAttribute("defer")}},{key:"setCalled",value:function(){var e,t,n,o,i=this;this.called=!0,this.element.classList.add("ad-called"),this.startTime=v.now(),(e=this.data.id,t="measureJsOverload:"+e,n=v.memory,o=null,n&&(o=n.usedJSHeapSize/n.jsHeapSizeLimit*100),new Promise((function(e){v.mark("".concat(t,"-start")),setTimeout((function(){v.mark("".concat(t,"-end")),v.measure(t,"".concat(t,"-start"),"".concat(t,"-end"));var n=v.getEntriesByName(t)[0].duration;e({memoryAtLoad:o,delayAtLoad:n})}),0)}))).then((function(e){i.memoryAtLoad=e.memoryAtLoad,i.delayAtLoad=e.delayAtLoad}))}},{key:"isTaskQueueComplete",value:function(){return 0===this.tasks.filter((function(e){return!e.isComplete})).length}},{key:"getActiveSizes",value:function(){return this.data.breakpoints.sort((function(e){return e.viewport[0]})).filter((function(e){return matchMedia("(min-width: "+e.viewport[0]+"px)").matches})).pop().sizes}},{key:"getSlotName",value:function(){if(this._slotName)return this._slotName;var e=we().country;e=e?"USA"===e?"us":"non-us":"unknown";var t=P(),n=this.data.format;return this._slotName="".concat(t,"_").concat(n,"_").concat(e),this._slotName}},{key:"getTargetingMap",value:function(){var e=this,t={};return this.gptSlot.getTargetingKeys().forEach((function(n){return t[n]=e.gptSlot.getTargeting(n)})),t}},{key:"getMaxBid",value:function(){var e,t=this.gptSlot.getTargeting("hb_pb")[0],n=this.getAmazonBids();for(var o in n){var i=parseFloat(n[o]);(!e||i>e)&&(e=i)}return t&&(!e||parseFloat(t)>e)?t:e?e.toFixed(2):void 0}},{key:"getAmazonBids",value:function(){var e=this.getTargetingMap(),t={};return(e.amznbid||[]).length&&e.amznbid.forEach((function(n,o){if(1!=n&&2!=n&&0!=n){var i=e.amznp[o],a=ie[i]||"tam_unmapped_".concat(i),r=me[n];void 0!==r?t[a]=r:console.warn("A9 returned a bid that does not map to a real value")}})),t}},{key:"getBids",value:function(){var e=this.getTargetingMap(),t={};Object.keys(this.getTargetingMap()).filter((function(e){return 0===e.indexOf("hb_pb_")})).forEach((function(n){var o=parseFloat(e[n][0]);o>0&&!isNaN(o)&&(t[n.replace("hb_pb_","prebid_")]=e[n][0])}));var n=this.getAmazonBids();return t=b({},t,n)}},{key:"getBidders",value:function(){return Object.keys(this.getBids())}},{key:"reset",value:function(){he(this)}},{key:"id",get:function(){return this.element.id}}],[{key:"all",value:function(){return ke}},{key:"clear",value:function(){e.all().map((function(e){e.element.classList.remove("is-registered")})),ke.length=0}},{key:"getById",value:function(e){return ke.filter((function(t){return t.element.id===e}))[0]}}]),e}(),xe=function(){function e(t){g(this,e),this.name=t,this.isComplete=!1}return h(e,[{key:"done",value:function(){this.isComplete=!0}}]),e}();function je(){var e=f(document.querySelectorAll("gpt-ad:not(.is-registered)")).map((function(e){return new ye(e)}));e.length&&s("Found ".concat(e.length," <gpt-ad> elements")),e.forEach((function(e){ke.push(e)}))}function ze(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}T.push((function(){s("Bind slotRenderEnded handler"),googletag.pubads().addEventListener("slotRenderEnded",(function(e){s("slotRenderEnded",e);var t=ye.getById(e.slot.getSlotElementId());if(t){if(["IOM","ix_id","hb_bidder","hb_adid","hb_pb"].forEach((function(e){t.gptSlot.clearTargeting(e)})),e.isEmpty)return s("Ad loaded empty: ".concat(t.id," 📭")),t.element.classList.add("is-empty"),void u("ad-empty",t.element);if(t.size=e.size,t.advertiserId=e.advertiserId,t.lineItemId=e.lineItemId,t.creativeId=e.creativeId,t.campaignId=e.campaignId,t.hadViewableImpression=!1,t.googleQueryId=t.element.getAttribute("data-google-query-id"),t.element.advertiserId=e.advertiserId,t.element.lineItemId=e.lineItemId,t.element.creativeId=e.creativeId,t.element.campaignId=e.campaignId,-1!==e.slot.getHtml().indexOf('<meta name="atlads" content="block-unit">'))return s("Ad loaded suppressed ".concat(t.id," 🙅‍♂️")),t.element.classList.add("is-empty"),t.element.classList.add("is-empty--suppressed"),t.element.style.display="none",void u("ad-empty",t.element);t.loaded=!0,s("Ad loaded successfully: ".concat(t.id," as a ").concat(t.size.join("x")," 🎣"));var n=t.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ad-loaded")}));n.push("ad-loaded");var o,i=r[t.size.join("x")]||"standard";n.push("ad-loaded--".concat(i)),t.element.className=n.join(" "),u("ad-loaded",t.element),o=t.id,f(document.querySelectorAll("[data-enable-if-ad="+o+"]")).forEach((function(e){e.style.display="block",e.style.visibility="visible",console.warn("[data-enable-if-ad] is deprecated. Please remove it from..."),console.warn(e)}));var a="none"===getComputedStyle(t.element).display||null===t.offsetParent,d=null!==!t.parentElement,p=t.element.classList.contains("ad-hidden");a&&d&&!p&&console.error(c("\n        DANGER ☢️! DANGER ☢️!\n\n        The ad with the id of ".concat(t.id," has loaded with a display\n        style of none. This is never allowed to happen. If an \n        ad loads, it must be visible.\n      "))),l(t.size,[1,3])?t.isResponsive=!0:t.isResponsive=!1}}))})),T.push((function(e){s("Bind impressionViewable handler"),googletag.pubads().addEventListener("impressionViewable",(function(e){var t=ye.getById(e.slot.getSlotElementId());t&&(t.hadViewableImpression=!0,u("viewable-impression",t.element),s("Viewable impression for ".concat(t.id," 👀")))}))}));var Se=setTimeout;function Ae(e){return Boolean(e&&void 0!==e.length)}function Ie(){}function Ee(e){if(!(this instanceof Ee))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Le(e,this)}function qe(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,Ee._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(e){return void Te(t.promise,e)}Ce(t.promise,o)}else(1===e._state?Ce:Te)(t.promise,e._value)}))):e._deferreds.push(t)}function Ce(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof Ee)return e._state=3,e._value=t,void Pe(e);if("function"==typeof n)return void Le((o=n,i=t,function(){o.apply(i,arguments)}),e)}e._state=1,e._value=t,Pe(e)}catch(t){Te(e,t)}var o,i}function Te(e,t){e._state=2,e._value=t,Pe(e)}function Pe(e){2===e._state&&0===e._deferreds.length&&Ee._immediateFn((function(){e._handled||Ee._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)qe(e,e._deferreds[t]);e._deferreds=null}function Oe(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function Le(e,t){var n=!1;try{e((function(e){n||(n=!0,Ce(t,e))}),(function(e){n||(n=!0,Te(t,e))}))}catch(e){if(n)return;n=!0,Te(t,e)}}Ee.prototype.catch=function(e){return this.then(null,e)},Ee.prototype.then=function(e,t){var n=new this.constructor(Ie);return qe(this,new Oe(e,t,n)),n},Ee.prototype.finally=ze,Ee.all=function(e){return new Ee((function(t,n){if(!Ae(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function a(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(t){a(e,t)}),n)}o[e]=r,0==--i&&t(o)}catch(e){n(e)}}for(var r=0;r<o.length;r++)a(r,o[r])}))},Ee.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Ee?e:new Ee((function(t){t(e)}))},Ee.reject=function(e){return new Ee((function(t,n){n(e)}))},Ee.race=function(e){return new Ee((function(t,n){if(!Ae(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)Ee.resolve(e[o]).then(t,n)}))},Ee._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){Se(e,0)},Ee._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Be=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function Ne(e){var t=document.createElement("img");t.src=e,t.width=1,t.height=1,t.setAttribute("style","position: absolute; top: -1px; left: -1px; width:0; height:0; visibility:hidden;"),document.body.appendChild(t)}function De(e,t,n){var o=document.createElement("script");return o.src=e,o.async=!0,o.onload=function(){return performance.mark("ads:".concat(t,"_loaded"))},o.onerror=n,document.body.appendChild(o),o}function Re(e){var t=[];for(var n in e)void 0!==e[n]&&t.push("".concat(n,"=").concat(encodeURIComponent(e[n])));return t.join("&")}function Me(){var e=[];for(var t in J){var n=J[t];"function"==typeof n&&(n=n()),!1!==n&&e.push("".concat(t,":").concat(n))}return e.join(",")}"Promise"in Be?Be.Promise.prototype.finally||(Be.Promise.prototype.finally=ze):Be.Promise=Ee;var Ue=localStorage.getItem("bidStore2"),Ge=[];if(Ue)try{Ge=JSON.parse(Ue)}catch(e){s("Couldn't parse bidStore: ",Ge)}window.addEventListener("unload",(function(){try{localStorage.setItem("bidStore2",JSON.stringify(Ge)),function(){try{localStorage.removeItem("bidStore")}catch(e){}}()}catch(e){console.warn(e),console.warn("Local storage error. Bid history not saved.")}}));var Fe={getLog:function(){return Ge},addBid:function(e){console.log("Remembering bid for ".concat(e)),Ge.unshift(e),Ge.length=Ge.length<20?Ge.length:20},getBids:function(){return Ge.join(",")}},Ve=null,Je=!0,Qe=!0,He=P(),We=["grapeshot_segments","abt","experiment"],Ye=["slotName"];function Ke(e){var t=S(),n=t.perfUrl,i=t.globals,a=v.now();if(e.loadtime=a-e.startTime,1===e.batch&&(e.loadtime=a-Ve),e.loadtime=Math.round(e.loadtime),Je&&(v.mark("ads:first_ad"),v.measure("ads:dfp_roundtrip","ads:first_call","ads:first_ad"),v.measure("ads:controller_to_first_ad","ads:controller_loaded","ads:first_ad")),Qe&&e.tasks.length&&(v.mark("ads:first_ad_with_tasks"),v.measure("ads:controller_to_first_ad_with_tasks","ads:controller_loaded","ads:first_ad_with_tasks")),n){var r=e.getBids(),s={init:Ve,isfirst:Je,time:e.loadtime,device:He,advId:e.advertiserId,crId:e.creativeId,cmpId:e.campaignId,LnId:e.lineItemId,zone:e.gptSlot.getAdUnitPath(),url:location.href,pageviewid:o,size:e.size.join("x"),eligibleSizes:function(e){return e.getActiveSizes().map((function(e){return e.join("x")})).join(",")}(e),batch:e.batch,experiments:Me(),stalls:e.stalls,memoryAtLoad:e.memoryAtLoad,delayAtLoad:e.delayAtLoad,pos:e.data.targeting.pos.join(","),class:e.data.format,bidcount:Object.keys(r).length,donotsell:te()?1:0,previousBids:Fe.getBids(),template:i.template};for(var d in r)s["bid:".concat(d)]=r[d],Fe.addBid(r[d]);var l=function(e,t){var n=Object.keys(e).filter((function(n){return t(n,e[n])})),o={};return n.forEach((function(t){return o[t]=e[t]})),o}(i,(function(e){return-1!==We.indexOf(e)}));s=b({},l,s),Ye.forEach((function(t){var n=e.gptSlot.getTargeting(t);t.length&&(s["kv_".concat(t)]=n)}));var c=Re(s);Ne("".concat(n,"?").concat(c,"&").concat(function(e){var t=[];return Object.keys(e).forEach((function(n){var o=e[n];Array.isArray(o)||(o=[].concat(o)),t.push("kv_".concat(n,"_items=").concat(o.length,"&kv_").concat(n,"_length=").concat(o.join("").length))})),t.join("&")}(i))),Je=!1,e.tasks.length&&(Qe=!1)}}function Xe(e){var t=e.addEventListener,n=["scroll","dommousescroll","mousewheel","wheel","touchmove","touchstart","mousemove"];e.EventTarget.prototype.addEventListener=function(e){var o=Array.prototype.slice.call(arguments);e=e.toLowerCase();var i=o[2]&&o[2].passive;if(!i&&n.indexOf(e)>-1){var a="object"===p(o[2])?o[2]:{};"boolean"==typeof o[2]&&(a.useCapture=o[2]),a.passive=!0,o[2]=a}t.apply(this,o)}}var Ze=0;function $e(){var e=performance.getEntriesByType("measure").filter((function(e){return e.name.startsWith("ads:")}));if(e.length!==Ze){Ze=e.length;var t={};e.forEach((function(e){t[e.name]=e.duration})),console.debug(t)}}function et(e,t){e[t]?e[t]++:e[t]=1}function tt(){var e=ye.all().filter((function(e){return e.getActiveSizes().length})),t={version:2,type:"endstate",date:new Date,time_from_pageload:v.now(),ua:window.navigator.userAgent,pageViewUuid:o,experiments:Me(),abt:W(),adsOnPage:e.length,adsCalled:e.filter((function(e){return e.called})).length,adsLoaded:e.filter((function(e){return e.loaded})).length,country:we().country};t=b(t,function(e){var t={};return e.map((function(e){var n=e.getBidders();n.length?et(t,"adsWithBids"):et(t,"adsWithoutBids"),n.map((function(n){var o="lostBids:".concat(n);e.loaded?o="completedBids:".concat(n):e.called&&(o="calledNotLoadedBids:".concat(n)),et(t,o)}))})),t}(e)),a.endstate&&(s("👋 debug=endstate logged the end state 5s after you enter the page."),s(t));var n=Re(t);navigator.sendBeacon("".concat("https://data-cdn.theatlantic.com/ads.gif","?").concat(n))}var nt="".concat(window.location.protocol,"//").concat(window.location.host,"/static/advertising/bookmarklet.js");function ot(e){this.message=e}ot.prototype=new Error,ot.prototype.name="InvalidCharacterError";var it="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ot("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,a=0,r="";o=t.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?r+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return r};var at=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(it(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return it(t)}};function rt(e){this.message=e}rt.prototype=new Error,rt.prototype.name="InvalidTokenError";var st=function(e,t){if("string"!=typeof e)throw new rt("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(at(e.split(".")[n]))}catch(e){throw new rt("Invalid token specified: "+e.message)}};st.InvalidTokenError=rt;var dt={referrers:function(){if(document.referrer&&document.referrer.split("/")[2]!==window.location.hostname&&!sessionStorage.referrer&&(sessionStorage.referrer=document.referrer.split("/")[2]),sessionStorage.referrer){var e=S().globals;e.referrer=sessionStorage.referrer,z({globals:e})}},gptDomainOverride:function(){var e=S(),t=e.zone,n=e.adtest_domain,o=t.split("/"),a=parseInt(i.adtest,10);isNaN(a)||(1===a&&(a=""),o[2]="".concat(n).concat(a));var r=i["gpt-domain"];r&&(o[2]=r),z({zone:o.join("/")})},utmSource:function(){if(i.utm_source){var e=S().globals;e.utm_source=i.utm_source,z(e)}},timing:function(){Ve=Math.round(v.now()),S().perfUrl&&void 0!==v.now()&&window.addEventListener("ad-loaded",(function(e){Ke(e.target.inspect())}))},patchEventHandlers:function(){S().patchEventHandlers&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}()&&(Xe(window),T.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){for(var t=e.slot.getSlotElementId(),n=document.getElementById(t).querySelectorAll("iframe"),o=0;o<n.length;o++)Xe(n[o].contentWindow)}))})))},setRandomValue:function(){var e=S().globals;e.abt=W(),e.sync=H,z({globals:e})},doubleVerifyReady:function(){var e=!1,t=S(),n=t.datePublished,o=t.globals;if(n){var i=new Date(n).getTime();e=((new Date).getTime()-i)/1e3/60/60>1}o.dv_ready=e?"yes":"no"},keyValueOverride:function(){Object.keys(i).filter((function(e){return 0===e.indexOf("adkv_")})).forEach((function(e){var t=S().globals;t[e.replace("adkv_","")]=i[e].split(","),z({globals:t})}))},blueconic:function(){var e=localStorage.getItem("dfp_blueconic_targeting");if(e){var t=S().globals;t.bc_segments=e.split(","),z({globals:t})}},pageMeta:function(){var e=((window.Atlantic||{}).page_meta||{}).adtargeting;if(e){var t=S().globals;z({globals:t=b(e,t)})}},sessionDepth:function(){sessionStorage.sessionDepth?sessionStorage.sessionDepth=Number(sessionStorage.sessionDepth)+1:sessionStorage.sessionDepth=1;var e=S().globals;e.session_depth=sessionStorage.sessionDepth,z({globals:e})},sessionSegment:function(){K("session_segment_v2")||Y("session_segment_v2",V(1,1e3));var e=S().globals;e.session_segment=K("session_segment_v2"),z({globals:e})},measurementHelpers:function(){a.adperf&&(window.addEventListener("ad-loaded",$e),window.addEventListener("ad-empty",$e))},logEndState:function(){window.navigator.sendBeacon&&(a.endstate&&setTimeout((function(){tt()}),5e3),window.addEventListener("unload",tt,!1))},loadBookmarklet:function(){var e=function(){"#badad"===window.location.hash&&De(nt)};e(),window.onhashchange=e},classCounts:function(){var e=S().globals;T.push((function(){var t={injector:0,rrail:0};ye.all().filter((function(e){return e.getActiveSizes().length})).map((function(e){return e.data.format||""})).forEach((function(e){void 0!==t[e]&&t[e]++})),Object.keys(t).forEach((function(n){if(t[n]>0){for(var o=t[n],i=[],a=1;a<=o;a++)i.push(a);e["".concat(n,"-count")]=i}}))}))},platform:function(){var e=S().globals;e.platform="web",z({globals:e})},user:function(){var e=function(){var e=K("atljwt");if(!e)return{};try{return st(e)}catch(e){return console.warn("Issue decoding JWT token",e),{}}}(),t=(e.paymeter_access,e.ad_free),n=S().globals;n.user=n.user||[],t&&(s("💥 User has premium account. Targeting for house ads only and disabling header bidders."),n.user.push("masthead"),n.user.push("adfree"),z({prebid:null,amazon:null})),z({globals:n})},privacy:function(){var e=S().globals;e.ccpa=te(),z({globals:e}),function(){if(te()){window.Krux||((window.Krux=function(){Krux.q.push(arguments)}).q=[]);window.Krux("ns:atlantic","consent:set",{idt:"device",dt:"kxcookie",dc:!0,al:!0,tg:!0,cd:!0,sh:!0,re:!1})}}(),s("__uspapi created for communicating CCPA state."),window.__uspapi=function(e,t,n){if("getUSPData"===e)if((new Date).getFullYear()<2020&&!a.donotsell)n(null);else{var o=1,i="-",r="-",s="-";("CA"===we().region||te())&&(i="Y",r=te()?"Y":"N",s="Y"),n({version:o,uspString:[o,i,r,s].join("")},!0)}else console.error("🙉 __uspapi Command wasn't getUSPData. No other commands are supported.")}},templates:function(){var e=S().globals;e.template=e.template||"other_unassigned",e.template_raw=e.template_raw||"unknown",z({globals:e})}};var lt="desktop"===P()?2250:3e3,ct=["300x250","320x50","728x90","300x600","970x250"],ut={buckets:[{precision:2,min:0,max:2,increment:.02},{precision:2,min:2,max:10,increment:.05},{precision:2,min:10,max:25,increment:.25},{precision:2,min:25,max:50,increment:.5},{precision:2,min:50,max:100,increment:1}]};var ft={};function pt(e){if(ft[e.id])return ft[e.id];var t="".concat(e.getSlotName(),"/").concat(e.id);return ft[e.id]=t,t}function gt(e){var t;for(var n in ft)if(ft[n]===e){t=ye.getById(n);break}return void 0===t&&console.error('🚨 No ad matching Prebid code "'.concat(e,'".\n      Something is very wrong. 🚨')),t}var mt={mobile_injector_us:1230211,"mobile_injector_non-us":1407710,mobile_rrail_us:1407713,"mobile_rrail_non-us":1407711,mobile_adhesion_us:1230205,"mobile_adhesion_non-us":1407712,tablet_injector_us:1230330,"tablet_injector_non-us":1407707,tablet_rrail_us:1230328,"tablet_rrail_non-us":1407708,tablet_adhesion_us:1230326,"tablet_adhesion_non-us":1407709,desktop_injector_us:1230203,"desktop_injector_non-us":1407706,desktop_rrail_us:1444602,"desktop_rrail_non-us":1407705,desktop_adhesion_us:1230200,"desktop_adhesion_non-us":1407704,desktop_injector_unknown:1444603,desktop_rrail_unknown:1444601,desktop_adhesion_unknown:1444605,mobile_injector_unknown:1444609,mobile_rrail_unknown:1444608,mobile_adhesion_unknown:1444607,tablet_injector_unknown:1444604,tablet_rrail_unknown:1444600,tablet_adhesion_unknown:1444606};var ht={mobile_injector_us:417250,"mobile_injector_non-us":417251,mobile_rrail_us:417252,"mobile_rrail_non-us":417253,mobile_adhesion_us:417254,"mobile_adhesion_non-us":417255,tablet_injector_us:417256,"tablet_injector_non-us":417257,tablet_rrail_us:417258,"tablet_rrail_non-us":417259,tablet_adhesion_us:417260,"tablet_adhesion_non-us":417261,desktop_injector_us:417262,"desktop_injector_non-us":417263,desktop_rrail_us:417264,"desktop_rrail_non-us":417265,desktop_adhesion_us:417266,"desktop_adhesion_non-us":417267,desktop_injector_unknown:417268,desktop_rrail_unknown:417269,desktop_adhesion_unknown:417270,mobile_injector_unknown:417271,mobile_rrail_unknown:417272,mobile_adhesion_unknown:417273,tablet_injector_unknown:417274,tablet_rrail_unknown:417275,tablet_adhesion_unknown:417276};var bt={"desktop_adhesion_non-us":1417850,desktop_adhesion_unknown:1417858,desktop_adhesion_us:1417848,"desktop_injector_non-us":1417842,desktop_injector_unknown:1417852,desktop_injector_us:1417840,"desktop_rrail_non-us":1417846,desktop_rrail_unknown:1417854,desktop_rrail_us:1417844,"mobile_adhesion_non-us":1417826,mobile_adhesion_unknown:1417866,mobile_adhesion_us:1417824,"mobile_injector_non-us":1417816,mobile_injector_unknown:1417860,mobile_injector_us:1417814,"mobile_rrail_non-us":1417822,mobile_rrail_unknown:1417862,mobile_rrail_us:1417818,"tablet_adhesion_non-us":1417838,tablet_adhesion_unknown:1417874,tablet_adhesion_us:1417836,"tablet_injector_non-us":1417830,tablet_injector_unknown:1417870,tablet_injector_us:1417828,"tablet_rrail_non-us":1417834,tablet_rrail_unknown:1417872,tablet_rrail_us:1417832};var vt={"desktop_adhesion_non-us":"2472060",desktop_adhesion_unknown:"2472061",desktop_adhesion_us:"2472062","desktop_injector_non-us":"2472063",desktop_injector_unknown:"2472064",desktop_injector_us:"2472065","desktop_rrail_non-us":"2472066",desktop_rrail_unknown:"2472067",desktop_rrail_us:"2472068","mobile_adhesion_non-us":"2472069",mobile_adhesion_unknown:"2472070",mobile_adhesion_us:"2472071","mobile_injector_non-us":"2472072",mobile_injector_unknown:"2472073",mobile_injector_us:"2472074","mobile_rrail_non-us":"2472075",mobile_rrail_unknown:"2472076",mobile_rrail_us:"2472077","tablet_adhesion_non-us":"2472078",tablet_adhesion_unknown:"2472079",tablet_adhesion_us:"2472080","tablet_injector_non-us":"2472081",tablet_injector_unknown:"2472082",tablet_injector_us:"2472083","tablet_rrail_non-us":"2472084",tablet_rrail_unknown:"2472085",tablet_rrail_us:"2472086"};var _t={},wt=1;function kt(){var e=ye.all().map((function(e){return function(e){var t=e.getActiveSizes().filter((function(e){return-1!==ct.indexOf(e.join("x"))}));if(0!==t.length)return{code:pt(e),mediaTypes:{banner:{sizes:t}},bids:[],_slotName:e.getSlotName()}}(e)})).filter((function(e){return void 0!==e}));return e.forEach((function(e){J.disableAppnexus()?s("🔬Disabled Appnexus for experiment"):function(e){var t=13395560;"mobile"!==P()&&(t=13395544);var n={"desktop_adhesion_non-us":16889974,"desktop_injector_non-us":16889968,"desktop_rrail_non-us":16889972,"desktop_unknown_non-us":17396299,"mobile_adhesion_non-us":16889956,"mobile_injector_non-us":16889950,"mobile_rrail_non-us":16889953,"mobile_unknown_non-us":17396301,"tablet_adhesion_non-us":16889962,"tablet_injector_non-us":16889958,"tablet_rrail_non-us":16889960,"tablet_unknown_non-us":17396300,desktop_adhesion_unknown:17396287,desktop_adhesion_us:16889973,desktop_injector_unknown:17396288,desktop_injector_us:16889967,desktop_rrail_unknown:17396289,desktop_rrail_us:16889970,desktop_unknown_unknown:17396302,desktop_unknown_us:17396296,mobile_adhesion_unknown:17396290,mobile_adhesion_us:16889954,mobile_injector_unknown:17396291,mobile_injector_us:16889949,mobile_rrail_unknown:17396292,mobile_rrail_us:16889951,mobile_unknown_unknown:17396304,mobile_unknown_us:17396298,tablet_adhesion_unknown:17396293,tablet_adhesion_us:16889961,tablet_injector_unknown:17396294,tablet_injector_us:16889957,tablet_rrail_unknown:17396295,tablet_rrail_us:16889959,tablet_unknown_unknown:17396303,tablet_unknown_us:17396297};n[e._slotName]&&(t=n[e._slotName]),e.bids.push({bidder:"appnexus",params:{placementId:t,member:7498}})}(e),J.disableIndex()?s("🔬Disabled IX for experiment"):function(e){var t=ht[e._slotName],n={"300x250":"274648","320x50":"274649"};"mobile"!==P()&&(n={"300x250":"274644","300x600":"274645","728x90":"274646","970x250":"274647"});var o=e.mediaTypes.banner.sizes.filter((function(e){return void 0!==n[e.join("x")]}));0!==o.length&&o.forEach((function(n){e.bids.push({bidder:"ix",params:{siteId:t,size:n}})}))}(e),J.disableCriteo()?s("🔬Disabled Criteo for experiment"):function(e){e.bids.push({bidder:"criteo",params:{zoneId:mt[e._slotName],networkId:7221}})}(e),J.disableRubicon()?s("🔬Disabled Rubicon for experiment"):function(e){var t=bt[e._slotName]||1093984;e.bids.push({bidder:"rubicon",params:{accountId:10540,siteId:202078,zoneId:t}})}(e),J.disableRubicon()?s("🔬Disabled Pubmatic for experiment"):function(e){var t=vt[e._slotName];e.bids.push({bidder:"pubmatic",params:{publisherId:"158802",adSlot:t}})}(e)})),e.filter((function(e){return e.bids.length>0}))}function yt(e){var t=function(){var e={debug:a.prebid,bidderTimeout:1500,enableSendAllBids:!0,priceGranularity:ut,userSync:{filterSettings:{iframe:{bidders:["pubmatic","rubicon","appnexus"],filter:"include"},image:{bidders:"*",filter:"include"}}}};return J.prebidUserID()&&(s("AB Test: Prebid user IDs experiment enabled"),e.userIds=[{name:"criteoId"},{name:"pubCommonId"}]),e}();e&&(t=function(e){return b({},e,{consentManagement:{cmpApi:"iab",timeout:500,allowAuctionWithoutConsent:!1}})}(t),s("🙈 Prebid configured for GDPR"));var n=we(),o=n.country,i=n.region,r="USA"===o&&"CA"===i;return(te()||r)&&(t=function(e){return b({},e,{usp:{cmpApi:"iab",timeout:100}})}(t),s("🙈 Prebid configured for US privacy")),wt>1&&(s("Prebid using a higher timeout for batch ".concat(wt)),t.bidderTimeout=lt),t}function xt(){var e=S(),t=e.lazy_load,n=e.gdpr,o=L().filter((function(e){return!0===_t[pt(e)]})).filter((function(e){var n=e.getLazySetting(t);return 0===n||(n+=.5,wt>1&&(n+=1),B(e.element,n))}));if(o.length){o.map((function(e){return s("".concat(e.data.id," in Prebid bidding batch ").concat(wt))})),wt>1&&window.pbjs.setConfig(yt(n));var i=new xe("prebid");o.forEach((function(e){return e.tasks.push(i)}));var r=o.map((function(e){return pt(e)}));r.forEach((function(e){return _t[e]=!1})),s("Prebid requesting bids for ".concat(r.join(", ")," 🛸"));var l="ads:prebid-lazybid-start:".concat(r.join(",")),c="ads:prebid-lazybid-end:".concat(r.join(",")),u="ads:prebid-lazybid:".concat(r.join(","));v.mark(l),window.pbjs.requestBids({adUnitCodes:r,bidsBackHandler:function(e,t){q.push((function(){s("Prebid assigning bids for : 👾 ",r,t?"Some bids timed out.":"Bids didn't time out.","bids : ",e),a.ads&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(e).length){var t=[],n=function(n){e[n].bids.map((function(e){t.push({adUnit:n,creativeId:e.creativeId,adId:e.adId,bidder:e.bidder,timeToRespond:e.timeToRespond,cpm:e.cpm,size:e.size,statusMessage:e.statusMessage})}))};for(var o in e)n(o);d(t)}}(e),window.pbjs.setTargetingForGPTAsync(r,(function(e){return function(t){var n=e.getSlotElementId();return gt(t).id===n}})),i.done(),v.mark(c),v.measure(u,l,c)}))}}),wt++}}var jt={amazon:function(e){if(te())return s("🙈 TAM disabled per Do Not Sell request."),void e();var t=S(),n=t.amazon,o=t.lazy_load;if(J.disableTAM())return s("🔬Disabled TAM for experiment"),void e();n?(v.mark(se),function(e,t,n,o,i,a,r){function s(n,o){t[e]._Q.push([n,o])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(a=n.createElement(o)).async=!0,a.src="//c.amazon-adsystem.com/aax2/apstag.js",(r=n.getElementsByTagName(o)[0]).parentNode.insertBefore(a,r))}("apstag",window,document,"script"),window.apstag.init({pubID:n,adServer:"googletag"}),C.push((function(){var e=L().filter((function(e){return!fe[e.id]})).filter(ge).filter((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.getLazySetting(e);return 0===n||(n+=.5,oe>1&&(n+=1),B(t.element,n))}(o,e)}));e.length&&(!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;oe++;var n=e.map((function(e){return e.id}));s("Amazon lazy bidding on",n);var o=!!ue;o&&v.mark(le),ue=!1;var i=new xe("amazon");e.forEach((function(e){return e.tasks.push(i)})),window.setTimeout((function(){i.isComplete||(s("Amazon bids timed out (".concat(1500,"ms)"),n),i.done())}),1500);var a=e.map((function(e){return s("".concat(e.data.id," in Amazon bidding batch ").concat(oe)),{slotID:e.element.id,slotName:e.getSlotName(),sizes:pe[e.id]}})),r=e.map((function(e){return e.element.id})),d="ads:amazon-lazybid-start:".concat(r.join(",")),l="ads:amazon-lazybid-end:".concat(r.join(",")),c="ads:amazon-lazybid:".concat(r.join(","));v.mark(d);var u={slots:a,timeout:1500};oe>1&&(s("Amazon bids for batch ".concat(oe," will use longer timeouts.")),u.timeout=ae,"desktop"===P()&&(u.timeout=re)),window.apstag.fetchBids(u,(function(e){s("Received ".concat(e.length," Amazon bids"),n),v.mark(l),v.measure(c,d,l),s("Set Amazon bids to slots",n),window.apstag.setDisplayBids(),i.done(),F({defaultLazy:t}),o&&v.mark(ce)}))}(e,o),e.forEach((function(e){return fe[e.id]=!0})))})),v.mark(de),e()):e()},prebid:function(e){var t=S(),n=t.prebid,o=t.gdpr;if(!n)return e();if(J.disableAllPrebid())return s("🔬Disabled all of Prebid for experiment"),void e();o&&(n=n.replace("/prebid.js","/prebid.cmp.js")),De(n,"Prebid.js",(function(){s("Could not load Prebid.js"),e()})),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[];var i,a=kt();a.forEach((function(e){return _t[e.code]=!0})),window.pbjs.que.push((i=function(){window.pbjs.addAdUnits(a),window.pbjs.setConfig(yt(o)),xt(),C.push(xt),e()},function(){try{i()}catch(e){console.error(e)}}))},cleanCreatives:function(e){var t=S(),n=t.prebid,o=t.amazon,i=!(!n&&!o);if(a["disable-cleanio"])e();else if(i){s("Loading Clean Creatives");var r=De("https://dojx47ab4dyxi.cloudfront.net/script.js");r.onload=e,r.onerror=e,setTimeout(e,5e3)}else e()}};function zt(){if(window.matchMedia&&void 0!==window.matchMedia("all").addListener){for(var e,t,n,o,i,a,r=(t=[],n=ye.all().map((function(e){return e.data.breakpoints})),(e=n,e.reduce((function(e,t){return e.concat(t)}),[])).map((function(e){return e.viewport[0]})).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t),d=function(e){if(e.matches){var t=ye.all().filter((function(e){return e.called&&document.body.contains(e.element)&&!function(e){return!!e.size&&e.getActiveSizes().filter((function(t){return l(e.size,t)})).length>0}(e)}));t.length&&(s("Crosses breakpoint ".concat(e.media,", clearing ads: ").concat(t.map((function(e){return e.id})).join(", "))),t.forEach((function(e){return e.reset()})))}},c=[],u=0;u<r.length;u++)a="(min-width: "+r[u]+"px)",(o=r[u+1])&&(a+=" and (max-width: "+(o-1)+"px)"),(i=window.matchMedia(a)).addListener(d.bind(this)),c.push(i);s("Created Breakpoints for Ads:",c)}}function St(e){var t=this;s("Ad options set to",e),z(e),window.__cmp&&!0!==e.disableConsent?Promise.all([ee(),_e()]).then((function(e){e[0].ok&&t.init()})):_e().then(this.init.bind(this))}St.prototype.init=function(){for(var e in s("Create ad Controller",this),v.mark("ads:controller_loaded"),dt)dt[e].call(this);if(t=!!K("scroll0"),n=window.Atlantic&&window.Atlantic.User&&window.Atlantic.User.isAdFree(),t||n)return function(){if(!K("adfree_audience")){var e=1e13*Math.random();Ne("https://pubads.g.doubleclick.net/activity;dc_iu=/4624/DFPAudiencePixel;ord=".concat(e,";dc_seg=468357871?")),Y("adfree_audience","1",30)}}(),void s("This is an adfree experience. 👋");var t,n;De("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPT");var o=function(e){e.call(i)};E.execute(o),E.setCallback(o),je();var i=this;v.mark("ads:vendors_start");var a=Object.keys(jt).map((function(e){v.mark("ads:start:".concat(e)),s("Ad vendor started: ".concat(e));var t=new Promise(jt[e].bind(i));return t.then((function(){s("Ad vendor ready: ".concat(e)),v.mark("ads:complete:".concat(e)),v.measure("ads:measure:".concat(e),"ads:start:".concat(e),"ads:complete:".concat(e))})),t}));Promise.all(a).then((function(){s("Vendors loaded. Pushing to GPT cmd queue. 💨"),v.mark("ads:vendors_ready"),v.measure("ads:measure:vendors","ads:vendors_start","ads:vendors_ready"),T.push((function(){i.startGpt(),q.execute(o),q.setCallback(o),s("Started making ad calls 🚀"),F({changeCorrelator:!0}),setInterval((function(){je(),ye.all().map((function(e){return e.createGptSlot()})),F()}),250)}))}))},St.prototype.setPageTargeting=function(){var e,t,n=S().globals;for(e in n)t=n[e],Array.isArray(t)?t=t.map((function(e){return e.toString()})):null!==t&&(t=t.toString()),googletag.pubads().setTargeting(e,t),s("Set global targeting: "+e+"="+t)},St.prototype.startGpt=function(){this.setPageTargeting(),googletag.pubads().setPrivacySettings({restrictDataProcessing:te(),childDirectedTreatment:!1}),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().setSafeFrameConfig({sandbox:!0}),googletag.pubads().enableAsyncRendering(),googletag.pubads().collapseEmptyDivs(),googletag.pubads().setCentering(!0),googletag.enableServices(),s("Started GPT services"),ye.all().map((function(e){return e.createGptSlot()})),function(){var e="outofpage";if(S().outofpage&&!N){if(null===document.getElementById(e)){var t=document.createElement("div");t.id=e,document.body.appendChild(t)}N=googletag.defineOutOfPageSlot(S().zone,e).addService(googletag.pubads()).setTargeting("pos",e),s("Created outofpage ad")}}(),zt()},St.prototype.updateOptions=function(e){z(e)},St.prototype.reset=function(){var e=this;T.push((function(){googletag.pubads().clear(),googletag.pubads().clearTargeting(),ye.all().map((function(e){return he(e)})),e.startGpt()}))},St.prototype.getOptions=function(){return S()},e.Controller=St,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ads.min.js.map
